
<div class="w-full h-screen flex items-center justify-center bg-gray-100 ">
  <div>
    <% @groups.each do |group| %>
      <div class="group-card">
        <h3><%= group.name %></h3>
          <p>Members:</p>
        <ul>
          <% group.users.each do |user| %>
            <li><%= user.name %></li>
          <% end %>
        </ul>
        <%= link_to "Go to Chat", chat_room_path(group), class: "bg-blue-500 text-white px-2 py-1 rounded" %>
      </div>
    <% end %>
  </div>
  <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700">
    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">User Information</h5>
    <% if user_signed_in? %>
      <h5 class="mb-2 text-sm font-bold tracking-tight text-gray-900 dark:text-white"><%= current_user.name %></h5>
      <p class="text-white"><%= current_user.email %></p>
      <p class="text-white"><%= current_user.user_role %></p>
    <% end %>
  </div>

  <div class="max-w-sm ml-15 p-6 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700">
    <h1 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Chatting Type</h1>

    <!-- Radio Buttons -->
    <div class="flex">
      <div class="flex items-center mb-4">
        <%= radio_button_tag :chat_type, "private", true, id: "private_chat_radio", class: "h-4 w-4 text-white focus:ring-blue-500 border-gray-300 rounded" %>
        <%= label_tag :chat_type_private, "Private Chat", class: "ml-2 block text-white cursor-pointer" %>
      </div>
      <div class="flex ml-5 items-center mb-4">
        <%= radio_button_tag :chat_type, "group", false, id: "group_chat_radio", class: "h-4 w-4 text-white focus:ring-blue-500 border-gray-300 rounded" %>
        <%= label_tag :chat_type_group, "Group Chat", class: "ml-2 block text-white cursor-pointer" %>
      </div>
    </div>

    <!-- Private Chat Form -->
    <div id="private_chat_fields" class="mt-4 text-white">
      <%= form_with url: create_private_chat_chat_rooms_path, method: :post do |f| %>
        <%= label_tag :user_id, "Select Member to Chat:" %><br>
        <%= select_tag :user_id, options_from_collection_for_select(@users, :id, :name), prompt: "Choose a user", required: true, class: "w-full text-orange-500 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        <div class="flex mt-4 items-center justify-center">
          <%= submit_tag "Start Chatting", class: "bg-blue-500 text-white px-4 py-2 rounded hover:cursor-pointer" %>
        </div>
      <% end %>
    </div>

    <!-- Group Chat Form -->
    <div id="group_chat_fields" class="mt-4 text-white hidden">
      <%= form_with url: create_group_chat_chat_rooms_path, method: :post do |gf| %>
        <div class="mb-2">
          <%= label_tag :group_name, "Group Name:" %><br>
          <%= text_field_tag :group_name, nil, required: true, class: "border p-2 w-full" %>
        </div>

        <div class="mb-2">
          <%= label_tag :user_ids, "Select Members:" %><br>
          <% @users.each do |user| %>
            <div>
              <%= check_box_tag "user_ids[]", user.id %>
              <%= user.name %>
            </div>
          <% end %>
        </div>

        <div class="flex mt-2 items-center justify-center">
          <%= submit_tag "Start Group Chat", class: "bg-green-500 text-white px-4 py-2 rounded hover:cursor-pointer" %>
        </div>
      <% end %>
    </div>
  </div>
</div>








<script>
  document.addEventListener("DOMContentLoaded", () => {
    const privateRadio = document.getElementById("private_chat_radio");
    const groupRadio = document.getElementById("group_chat_radio");
    const privateFields = document.getElementById("private_chat_fields");
    const groupFields = document.getElementById("group_chat_fields");

    function toggleFields() {
      if (privateRadio.checked) {
        privateFields.classList.remove("hidden");
        groupFields.classList.add("hidden");
      } else {
        privateFields.classList.add("hidden");
        groupFields.classList.remove("hidden");
      }
    }

    privateRadio.addEventListener("change", toggleFields);
    groupRadio.addEventListener("change", toggleFields);

    toggleFields(); // initial call
  });
</script>
